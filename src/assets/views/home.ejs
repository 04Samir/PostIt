<%- include('partials/header', { title , name }) %>

    <body class="d-flex flex-column min-vh-100">
            <%- include('partials/navigation', { name , session }) %>

            <div class="container mt-4">
                <div class="row">
                    <div class="col-md-2">
                        <h2>Popular Topics</h2>
                        <ul class="list-unstyled">
                            <% topics.forEach(topic=> { %>
                                <li>
                                    <a href="<%= baseUrl %>/topics/<%= topic.name %>" class="text-decoration-none">
                                        <%= topic.name %>
                                    </a>
                                </li>
                            <% }); %>
                        </ul>
                        <div>
                            <a href="<%= baseUrl %>/topics" class="btn btn-primary">View All Topics</a>
                        </div>
                    </div>

                    <div class="col-md-7">
                        <div class="border-start ps-3">
                            <h2>Recent Posts</h2>
                            <% posts.forEach(post=> { %>
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <a href="<%= baseUrl %>/topics/<%= post.topic_name %>" class="text-decoration-none">
                                            topics/<%= post.topic_name %>
                                        </a>
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title"><strong>
                                            <a href="<%= baseUrl %>/topics/<%= post.topic_name %>/posts/<%= post.id %>">
                                                <%= post.title %>
                                            </a>
                                            </strong></h5>
                                        <p class="card-text">
                                            <%= post.content %>
                                        </p>
                                    </div>
                                    <div class="card-footer">
                                        <small class="text-muted">
                                            Posted <span class="post-time" data-created-at="<%= post.created_at %>"><%= post.created_at %></span>
                                        </small>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                        <div class="mb-4">
                            <div class="text-end">
                                <a href="<%= baseUrl %>/posts" class="btn btn-primary w-100">View All Posts</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 bg-light p-3 h-50">
                        <h2>New Users</h2>
                        <ul class="list-unstyled">
                            <% users.forEach(user=> { %>
                                <li>
                                    <a href="<%= baseUrl %>/users/<%= user.username %>" class="text-decoration-none">
                                        <%= user.username %>
                                    </a>
                                </li>
                            <% }); %>
                        </ul>
                        <div>
                            <a href="<%= baseUrl %>/users" class="btn btn-primary">View All Users</a>
                        </div>
                    </div>
                </div>
            </div>

            <%- include('partials/footer', { name }) %>

    </body>

    </html>
